{% extends "base.html" %}

{% block title %}FoodWorld â€“ Recipes{% endblock %}

{% block content %}
{% set show_search = true %}

<section class="cards-page container">
  <h2 class="section-heading">
    {% if category %}
      Recipes in {{ category.name }}
    {% else %}
      All Recipes
    {% endif %}
  </h2>

  {% if recipes %}
    <div class="cards-grid">
      {% for r in recipes %}
        <div class="card">
          <h3>{{ r.name }}</h3>

          {% if r.photo %}
            <img src="{{ r.photo }}" alt="{{ r.name }}" loading="lazy">
          {% else %}
            <img src="{{ url_for('static', filename='default.jpg') }}" alt="No image" loading="lazy">
          {% endif %}

          <p>{{ r.description or '' }}</p>

          <p class="meta">
            Category: {{ r.category }}
          </p>

          <p>
            {% if r.instructions %}
              {{ r.instructions[:100] }}{% if r.instructions|length > 100 %}...{% endif %}
            {% endif %}
          </p>

          <a href="{{ url_for('recipe_bp.recipe_detail', recipe_id=r.id) }}" class="btn">
            View Recipe
          </a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No recipes found. Try another search!</p>
  {% endif %}
</section>
{% endblock %}